<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="http://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
  <style>
    * {
      overflowX: hidden;
    }

    body {
      padding: 0;
      margin: 0;
    }

    #myCanvas {
      background-color: rgb(255, 255, 255);
      width: 100%;
      height: 100%;
    }
  </style>
</head>

<body>
  <canvas id="myCanvas"></canvas>

  <script>
    var canvas = document.getElementById("myCanvas");
    var canvasWidth = canvas.width;
    var canvasHeight = canvas.height;
    var ctx = canvas.getContext("2d");
    var canvasData = ctx.getImageData(0, 0, canvasWidth, canvasHeight);

    // That's how you define the value of a pixel //
    function drawPixel(x, y, r, g, b, a) {
      var index = (x + y * canvasWidth) * 4;
      canvasData.data[index + 0] = r;
      canvasData.data[index + 1] = g;
      canvasData.data[index + 2] = b;
      canvasData.data[index + 3] = a;
    }

    // That's how you update the canvas, so that your //
    // modification are taken in consideration //
    function updateCanvas() {
      ctx.putImageData(canvasData, 0, 0);
    }

    var queue = [];
    var j = 0;
    //function clearLastPoint(points)
    var myTime = setInterval(function() {
      var rad = (Math.floor(Math.random() * 60)) * (Math.PI / 180);
      var h = Math.floor(Math.random() * (170 - 100) + 100);
      var r = Math.floor(Math.random() * 255);
      var g = Math.floor(Math.random() * 255);
      var b = Math.floor(Math.random() * 255);
      var sign = Math.random() >= 0.5;

      var x = 0;
      var y = 0;
      if (sign) {
        x = Math.floor((canvasWidth / 2) + Math.sin(rad) * h);
      } else {
        x = Math.floor((canvasWidth / 2) - Math.sin(rad) * h);
      }
      y = Math.floor(canvasHeight - Math.cos(rad) * h);

      var arr = [x, y, r, g, b, 255];
      console.log(arr);
      if (j >= 19) {
        var temp = queue.shift();
        drawPixel(temp[0], temp[1], 255, 255, 255, 255);
        queue.push(arr);
        console.log(arr);
        console.log(h);
        console.log(Math.floor(Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2))));
        drawPixel(x, y, r, g, b, 255);
        updateCanvas();
      } else {
        queue.push(arr);
        console.log(arr);
        console.log(h);
        console.log(Math.floor(Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2))));
        drawPixel(x, y, r, g, b, 255);
        j++;
        updateCanvas();
      }
    }, 500);
  </script>
</body>

</html>
